# 網路封包Network Packet
## 標頭（Header）
- 源IP地址（Source IP Address）：
- 這是發送封包的設備的IP地址，用於標識封包的源頭。
- 目的IP地址（Destination IP Address）：
- 這是封包要到達的設備的IP地址，用於路由器決定封包的路徑。
- 版本（Version）：
- 指示IP協議的版本，IPv4或IPv6。IPv4的版本號是4，IPv6的版本號是6。
- 頭長度（Header Length, IHL）：
- 指示標頭的長度，通常是標頭的32位字（4字節）數。
- 服務類型（Type of Service, TOS）：
- 指示這個封包的優先級和服務類型，用於區分不同類型的服務（如低延遲或高吞吐量）。
- 封包總長度（Total Length）：
- 封包的總長度，包括標頭和數據，以字節為單位。
- 識別（Identification）：
- 用於將大數據分割成多個較小的封包進行傳輸，並在接收端重新組裝。
- 標記（Flags）：
- 包含分段控制信息，用於控制封包的分段和重組。
- 片段偏移量（Fragment Offset）：
- 指示封包片段在原始數據中的位置，允許接收端正確重組封包。
- 生存時間（Time to Live, TTL）：
- 限制封包在網路中存活的時間，以避免封包在網路中無限循環。每經過一個路由器，TTL會減少一個單位。
- 協議（Protocol）：
- 指示上一層協議類型，如TCP（協議號為6）或UDP（協議號為17），告訴網路層該如何處理封包中的數據。
- 頭部校驗和（Header Checksum）：
- 用於檢查標頭部分的錯誤，確保封包在傳輸過程中未被破壞。
- 選項（Options）：
- 可選字段，用於支持各種網路特性，如路由記錄、時間戳等。
## 數據部分（Data/Payload）
- 內容：
- 數據部分包含要傳輸的實際數據，如Web頁面、電子郵件內容、文件數據等。這部分數據是來自更高層（如傳輸層、應用層）的載荷。
- 分段（Segmentation）：
- 當數據過大無法直接放入一個封包時，它會被分段，並附加在每個封包的數據部分中。
## 尾部（Trailer）（並非所有封包都有此部分）
- 尾部檢查碼（Frame Check Sequence, FCS）：
- 用於檢查封包的完整性，通常使用校驗和或CRC（循環冗餘校驗）算法來驗證封包是否在傳輸過程中發生錯誤。
## 封包處理的過程
- 封裝：當應用層生成數據後，它會通過傳輸層（如TCP/UDP）進行封裝，然後由網路層將其進一步封裝成封包，加入網路層的標頭信息。
- 轉發：封包經過網路中的多個路由器，根據封包中的目的IP地址進行轉發，每次轉發時TTL會減少。
- 解封：當封包到達目的地後，目標設備的網路層會檢查封包的標頭，去除標頭後將數據傳遞給傳輸層，再由傳輸層將數據傳遞給應用層。
## 網路封包分析 | Network Packet Analysis

